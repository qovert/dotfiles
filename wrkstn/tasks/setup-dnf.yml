---
- name: Upgrade all
  dnf:
    name: "*"
    state: latest

- name: Install group pkgs
  dnf: 
    name: [ "@development tools", "@virtualization" ]

- name: Install pkgs
  dnf: 
    name: [ 'git', 'calibre', 'powerline', 'powerline-fonts', 'tmux-powerline', 'tmux',
    'screen', 'fedora-workstation-repositories', 'htop', 'python3-pip', 'remmina', 'remmina-plugins-rdp',
    'remmina-plugins-spice', 'remmina-plugins-secret', 'nextcloud-client', 'gnome-shell-extension-user-theme',
    'nmap', 'tilix', 'vim', 'vim-airline', 'curl', 'neofetch', 'wireshark', 'lolcat', 'terminus-fonts',
    'gnome-tweaks', 'zsh', 'sushi', 'dnf-plugins-core', 'vagrant' ]

- name: Microsoft Powershell Repo
  yum_repository:
    name: microsoft-prod
    description: Microsoft Repo
    gpgkey: "https://packages.microsoft.com/keys/microsoft.asc"
    baseurl: "https://packages.microsoft.com/rhel/7/prod/"
    enabled: 1

- name: Azure CLI Repo
  yum_repository:
    name: microsoft-azurecli
    description: AzureCLI repo
    gpgkey: "https://packages.microsoft.com/keys/microsoft.asc"
    baseurl: "https://packages.microsoft.com/yumrepos/azure-cli"
    enabled: 1

- name: VS Code Repo
  yum_repository:
    name: microsoft-vscode
    description: Visual Studio Code Repo
    gpgkey: "https://packages.microsoft.com/keys/microsoft.asc"
    baseurl: "https://packages.microsoft.com/yumrepos/vscode"
    enabled: 1

- name: MSFT Edge Repo
  yum_repository:
    name: microsoft-edge
    description: Repo for Edge dev channel
    gpgkey: "https://packages.microsoft.com/keys/microsoft.asc"
    baseurl: "https://packages.microsoft.com/yumrepos/edge"
    enabled: 1

- name: Hashicorp Repo
  shell: dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo
  args:
    creates: /etc/yum.repos.d/hashicorp.repo

- name: Add repository
  yum_repository:
    name: epel
    description: EPEL YUM repo
    baseurl: https://download.fedoraproject.org/pub/epel/$releasever/$basearch/
